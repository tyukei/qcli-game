# 575判定ゲーム

ブラウザで動く俳句の5-7-5音律判定ゲームです。

## 機能

- **2つのステージ**: 俳句ステージと日常ステージを選択可能
- **Gemini API連携**: Google Gemini APIを使用してリアルな俳句・短詩を生成
- **正確な575判定**: 日本語の音数を正確にカウントして575を判定
- **30秒チャレンジ**: 制限時間30秒で何問正解できるかを競う
- **キーボード操作**: YキーとNキーで素早く回答
- **スコア別エンディング**: 成績に応じた4種類のエンディング
- **ひらがな生成**: 生成される文章はすべてひらがなで、句読点なし

## ステージ紹介

### 🌸 俳句ステージ
- 季語を含んだ美しい俳句の575判定
- 自然や日常の美しい瞬間を表現した文章が出題
- 伝統的な俳句の感覚を身につけられる

### 💭 日常ステージ  
- 生活や仕事で思わず575になってしまった一言
- 「こーひーが / つめたくなった / またいれよう」のような日常会話
- 意外と575になっている普段の言葉を発見できる

## プレイ方法

1. [GitHub Pages版](https://tyukei.github.io/qcli-game/)にアクセス
2. ステージを選択（俳句ステージまたは日常ステージ）
3. 「ゲーム開始」ボタンをクリック
4. 表示された文章が17文字（モーラ）かどうかを判定
5. 「575である」または「575でない」ボタンをクリック（またはYキー/Nキー）
6. 30秒間でできるだけ多くの問題に正解しよう！

## 判定ルール

- 合計17文字（モーラ）であれば「575である」と判定
- 17文字以外は「575でない」と判定
- 3行に分ける必要はなく、合計文字数のみで判定

## セットアップ（ローカル環境）

### 1. Gemini APIキーの取得

1. [Google AI Studio](https://aistudio.google.com/app/apikey) にアクセス
2. Googleアカウントでログイン
3. 「Create API Key」をクリック
4. 新しいプロジェクトを作成するか、既存のプロジェクトを選択
5. APIキーをコピー（`AIza`で始まる文字列）

### 2. APIキーの設定

#### 方法1: config.jsファイルを使用（推奨）

1. `config.example.js` を `config.js` にコピー：
   ```bash
   cp config.example.js config.js
   ```

2. `config.js` ファイルを編集：
   ```javascript
   const CONFIG = {
       GEMINI_API_KEY: 'あなたのAPIキー'
   };
   ```

### 3. 実行

ブラウザで `index.html` を開いてゲームを開始してください。

## 注意事項

- GitHub Pages版はAPIキーなしのフォールバック機能で動作しています
- ローカルで実行する場合は、APIキーを設定することでより多様な問題が出題されます

## スコア基準（30秒版）

- **12問以上**: 🏆 俳句マスター
- **9-11問**: 🌟 俳句上級者  
- **6-8問**: 📚 俳句学習者
- **5問以下**: 🌱 俳句初心者

## 技術仕様

- **音数カウント**: ひらがな・カタカナ・漢字に対応、拗音・促音を正確に処理
- **575判定**: 合計17文字（モーラ）かどうかを判定
- **エラーハンドリング**: API呼び出し失敗時の自動フォールバック
- **レスポンシブ**: モバイル・デスクトップ両対応
